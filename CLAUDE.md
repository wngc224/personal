# Claude Code Action 設定

## プロジェクト概要
個人の知識管理とドキュメンテーションのためのワークスペースです。

## Claude への指示
- 日本語で応答してください
- セキュリティとベストプラクティスを重視してください
- 変更前に確認をお願いします
- コードの品質と保守性を考慮してください

## ワークフロー設定

### トリガー条件
- `issue_comment` (Issue コメント作成時)
- `pull_request_review_comment` (PR レビューコメント作成時)

### 実行条件
```yaml
github.actor != 'claude' && github.actor != 'claude[bot]' && (
  コメント本文に '@claude' が含まれている
)
```

### フィルター機能
- **Claude bot の自己ループ防止**: Claude 自身のコメントは無視
- **null 参照エラー防止**: イベントタイプごとに適切なプロパティをチェック
- **効率的な実行**: `@claude` メンションがない場合はワークフロー自体を実行しない

## 実行結果の期待値

| アクション | 実行者 | 結果 |
|-----------|--------|------|
| `@claude`なしのコメント | ユーザー | ワークフロー実行されない |
| `@claude`ありのコメント | ユーザー | ワークフロー実行される |
| `@claude`ありのコメント | Claude bot | ワークフロー実行されない (自己ループ防止) |

## 権限設定
- `contents: write` - ファイル変更用
- `pull-requests: write` - PR操作用  
- `issues: write` - Issue操作用
- `id-token: write` - OIDC認証用

## セキュリティ考慮事項
- API キーは GitHub Secrets で管理
- 最小権限の原則に従った権限設定
- タイムアウト設定 (30分) でリソース保護 